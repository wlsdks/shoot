openapi: 3.0.3

info:
  title: Shoot Friend Service API
  version: 1.0.0
  description: |
    Shoot 애플리케이션의 Friend Service REST API 명세서

    **주요 기능**:
    - 친구 요청/수락/거절/취소
    - 친구 목록 조회 및 검색
    - 친구 그룹 관리
    - 친구 추천

    **비즈니스 규칙**:
    - 최대 친구 수: 1,000명
    - 자기 자신에게 친구 요청 불가
    - 이미 친구인 경우 요청 불가
    - 중복 요청 불가 (PENDING 상태 요청이 있으면 불가)
    - 친구 관계는 양방향 (Friendship 2개 생성)
    - 친구 추천: BFS 알고리즘 (최대 depth: 3)

    **MSA 전환 대비**: 이 API는 향후 독립된 Friend Service로 분리될 예정입니다.
  contact:
    name: Shoot Development Team
    email: dev@shoot.com

servers:
  - url: http://localhost:8080
    description: Local development server
  - url: https://api.shoot.com
    description: Production server

tags:
  - name: Friend Request
    description: 친구 요청 관련 API (요청 보내기, 취소)
  - name: Friend Response
    description: 친구 요청 응답 API (수락, 거절)
  - name: Friend Management
    description: 친구 관리 API (삭제, 조회)
  - name: Friend Search
    description: 친구 검색 API
  - name: Friend Group
    description: 친구 그룹 관리 API
  - name: Friend Recommendation
    description: 친구 추천 API

security:
  - BearerAuth: []

paths:
  /api/v1/friends/request:
    post:
      tags:
        - Friend Request
      summary: 친구 요청 보내기
      description: |
        다른 사용자에게 친구 요청을 보냅니다.

        **비즈니스 규칙**:
        - 자기 자신에게 요청 불가
        - 이미 친구인 경우 요청 불가
        - 이미 보낸 PENDING 요청이 있으면 재요청 불가
        - 상대방으로부터 이미 받은 PENDING 요청이 있으면 새 요청 불가 (대신 수락해야 함)
        - 최대 친구 수(1,000명) 초과 시 요청 불가

        **워크플로우**:
        1. 요청 유효성 검증 (위 비즈니스 규칙)
        2. FriendRequest 엔티티 생성 (PENDING 상태)
        3. FRIEND_REQUEST_SENT 이벤트 발행
        4. 상대방에게 알림 전송

        **이벤트**:
        - `FRIEND_REQUEST_SENT`: 친구 요청 전송 시 발행
      operationId: sendFriendRequest
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendFriendRequest'
            examples:
              normalRequest:
                summary: 일반적인 친구 요청
                value:
                  userId: 1
                  targetUserId: 2
      responses:
        '200':
          description: 친구 요청 전송 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: object
                        nullable: true
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data: null
                    message: "친구 요청을 보냈습니다."
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                selfRequest:
                  summary: 자기 자신에게 요청
                  value:
                    success: false
                    data: null
                    message: "자기 자신에게 친구 요청을 보낼 수 없습니다."
                    errorCode: "FRIEND_REQUEST_TO_SELF"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                alreadyFriends:
                  summary: 이미 친구인 경우
                  value:
                    success: false
                    data: null
                    message: "이미 친구입니다."
                    errorCode: "ALREADY_FRIENDS"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                duplicateRequest:
                  summary: 중복 요청
                  value:
                    success: false
                    data: null
                    message: "이미 친구 요청을 보냈습니다."
                    errorCode: "DUPLICATE_FRIEND_REQUEST"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                pendingRequestExists:
                  summary: 상대방으로부터 받은 요청이 있음
                  value:
                    success: false
                    data: null
                    message: "상대방으로부터 이미 친구 요청을 받았습니다. 해당 요청을 수락해주세요."
                    errorCode: "PENDING_REQUEST_FROM_TARGET"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                maxFriendsExceeded:
                  summary: 최대 친구 수 초과
                  value:
                    success: false
                    data: null
                    message: "최대 친구 수(1,000명)를 초과했습니다."
                    errorCode: "MAX_FRIENDS_EXCEEDED"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 대상 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/cancel:
    post:
      tags:
        - Friend Request
      summary: 보낸 친구 요청 취소하기
      description: |
        자신이 보낸 친구 요청을 취소합니다.

        **비즈니스 규칙**:
        - PENDING 상태의 요청만 취소 가능
        - 이미 처리된 요청(ACCEPTED/REJECTED)은 취소 불가
        - 자신이 보낸 요청만 취소 가능 (본인 확인)

        **워크플로우**:
        1. 요청 존재 여부 및 상태 확인
        2. 요청자 본인 확인
        3. 요청 상태를 CANCELLED로 변경
        4. FRIEND_REQUEST_CANCELLED 이벤트 발행

        **이벤트**:
        - `FRIEND_REQUEST_CANCELLED`: 친구 요청 취소 시 발행
      operationId: cancelFriendRequest
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelFriendRequest'
            examples:
              normalCancel:
                summary: 일반적인 요청 취소
                value:
                  userId: 1
                  targetUserId: 2
      responses:
        '200':
          description: 친구 요청 취소 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: object
                        nullable: true
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data: null
                    message: "친구 요청을 취소했습니다."
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                alreadyProcessed:
                  summary: 이미 처리된 요청
                  value:
                    success: false
                    data: null
                    message: "이미 처리된 요청은 취소할 수 없습니다."
                    errorCode: "REQUEST_ALREADY_PROCESSED"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notRequestOwner:
                  summary: 본인이 보낸 요청이 아님
                  value:
                    success: false
                    data: null
                    message: "본인이 보낸 요청만 취소할 수 있습니다."
                    errorCode: "NOT_REQUEST_OWNER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 403
        '404':
          description: 요청을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                requestNotFound:
                  summary: 요청 없음
                  value:
                    success: false
                    data: null
                    message: "친구 요청을 찾을 수 없습니다."
                    errorCode: "FRIEND_REQUEST_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/accept:
    post:
      tags:
        - Friend Response
      summary: 받은 친구 요청 수락
      description: |
        받은 친구 요청을 수락하여 서로 친구가 됩니다.

        **비즈니스 규칙**:
        - PENDING 상태의 요청만 수락 가능
        - 이미 처리된 요청(ACCEPTED/REJECTED/CANCELLED)은 수락 불가
        - 요청을 받은 본인만 수락 가능
        - 수락 시 양방향 Friendship 생성 (2개)
        - 최대 친구 수(1,000명) 확인

        **워크플로우**:
        1. 요청 존재 여부 및 상태 확인 (PENDING만 가능)
        2. 수신자 본인 확인 (userId == request.receiverId)
        3. 최대 친구 수 검증 (양측 모두)
        4. Friendship 엔티티 2개 생성 (양방향)
        5. 요청 상태를 ACCEPTED로 변경
        6. FRIEND_ADDED 이벤트 발행
        7. 양측에 알림 전송

        **이벤트**:
        - `FRIEND_ADDED`: 친구 추가 시 발행 (양측에 각각)
      operationId: acceptFriendRequest
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcceptFriendRequest'
            examples:
              normalAccept:
                summary: 일반적인 요청 수락
                value:
                  userId: 2
                  requesterId: 1
      responses:
        '200':
          description: 친구 요청 수락 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: object
                        nullable: true
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data: null
                    message: "친구 요청을 수락했습니다."
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                alreadyProcessed:
                  summary: 이미 처리된 요청
                  value:
                    success: false
                    data: null
                    message: "이미 처리된 요청입니다."
                    errorCode: "REQUEST_ALREADY_PROCESSED"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                maxFriendsExceeded:
                  summary: 최대 친구 수 초과
                  value:
                    success: false
                    data: null
                    message: "최대 친구 수(1,000명)를 초과했습니다."
                    errorCode: "MAX_FRIENDS_EXCEEDED"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notReceiver:
                  summary: 요청 수신자가 아님
                  value:
                    success: false
                    data: null
                    message: "본인에게 온 요청만 수락할 수 있습니다."
                    errorCode: "NOT_REQUEST_RECEIVER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 403
        '404':
          description: 요청을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                requestNotFound:
                  summary: 요청 없음
                  value:
                    success: false
                    data: null
                    message: "친구 요청을 찾을 수 없습니다."
                    errorCode: "FRIEND_REQUEST_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/reject:
    post:
      tags:
        - Friend Response
      summary: 받은 친구 요청 거절
      description: |
        받은 친구 요청을 거절합니다.

        **비즈니스 규칙**:
        - PENDING 상태의 요청만 거절 가능
        - 이미 처리된 요청은 거절 불가
        - 요청을 받은 본인만 거절 가능

        **워크플로우**:
        1. 요청 존재 여부 및 상태 확인 (PENDING만 가능)
        2. 수신자 본인 확인
        3. 요청 상태를 REJECTED로 변경
        4. FRIEND_REQUEST_REJECTED 이벤트 발행
        5. 요청자에게 알림 전송 (선택적)

        **이벤트**:
        - `FRIEND_REQUEST_REJECTED`: 친구 요청 거절 시 발행
      operationId: rejectFriendRequest
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectFriendRequest'
            examples:
              normalReject:
                summary: 일반적인 요청 거절
                value:
                  userId: 2
                  requesterId: 1
      responses:
        '200':
          description: 친구 요청 거절 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: object
                        nullable: true
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data: null
                    message: "친구 요청을 거절했습니다."
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                alreadyProcessed:
                  summary: 이미 처리된 요청
                  value:
                    success: false
                    data: null
                    message: "이미 처리된 요청입니다."
                    errorCode: "REQUEST_ALREADY_PROCESSED"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notReceiver:
                  summary: 요청 수신자가 아님
                  value:
                    success: false
                    data: null
                    message: "본인에게 온 요청만 거절할 수 있습니다."
                    errorCode: "NOT_REQUEST_RECEIVER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 403
        '404':
          description: 요청을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                requestNotFound:
                  summary: 요청 없음
                  value:
                    success: false
                    data: null
                    message: "친구 요청을 찾을 수 없습니다."
                    errorCode: "FRIEND_REQUEST_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/me/friends/{friendId}:
    delete:
      tags:
        - Friend Management
      summary: 친구 삭제
      description: |
        친구 목록에서 사용자를 삭제합니다.

        **비즈니스 규칙**:
        - 친구 관계가 있어야만 삭제 가능
        - 양방향 Friendship 모두 삭제 (2개)
        - 본인만 자신의 친구를 삭제 가능

        **워크플로우**:
        1. 인증된 사용자 확인 (JWT token)
        2. 친구 관계 확인
        3. 양방향 Friendship 삭제
        4. FRIEND_REMOVED 이벤트 발행
        5. 상대방에게 알림 전송 (선택적)
        6. 업데이트된 사용자 정보 반환

        **이벤트**:
        - `FRIEND_REMOVED`: 친구 삭제 시 발행
      operationId: removeFriend
      security:
        - BearerAuth: []
      parameters:
        - name: friendId
          in: path
          required: true
          description: 삭제할 친구의 사용자 ID
          schema:
            type: integer
            format: int64
          example: 2
      responses:
        '200':
          description: 친구 삭제 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 1
                      username: "john_doe"
                      nickname: "John"
                      email: "john@example.com"
                      userCode: "ABCD1234"
                      profileImageUrl: "https://example.com/profile.jpg"
                      backgroundImageUrl: null
                      statusMessage: "Hello!"
                      status: "ACTIVE"
                    message: "친구가 삭제되었습니다."
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notFriends:
                  summary: 친구 관계가 아님
                  value:
                    success: false
                    data: null
                    message: "친구 관계가 아닙니다."
                    errorCode: "NOT_FRIENDS"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 친구 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends:
    get:
      tags:
        - Friend Management
      summary: 내 친구 목록 가져오기
      description: |
        로그인 사용자의 친구 목록을 조회합니다.

        **비즈니스 규칙**:
        - ACCEPTED 상태의 Friendship만 조회
        - 양방향 관계 중 본인 기준으로 조회
        - 최대 친구 수: 1,000명

        **워크플로우**:
        1. 사용자 확인
        2. ACCEPTED 상태의 Friendship 조회
        3. 친구 사용자 정보 매핑
        4. 목록 반환 (기본 정렬: 친구 추가 최신순)
      operationId: getMyFriends
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          description: 조회할 사용자 ID (본인)
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: 친구 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      - id: 2
                        username: "jane_smith"
                        nickname: "Jane"
                        profileImageUrl: "https://cdn.shoot.com/profiles/jane.jpg"
                      - id: 3
                        username: "bob_jones"
                        nickname: "Bob"
                        profileImageUrl: null
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyList:
                  summary: 친구 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/incoming:
    get:
      tags:
        - Friend Management
      summary: 받은 친구 요청 목록
      description: |
        내가 받은 친구 요청들을 조회합니다 (incoming requests).

        **비즈니스 규칙**:
        - PENDING 상태의 요청만 조회
        - 본인이 수신자(receiver)인 요청만 조회
        - 최신순 정렬 (최근 받은 요청부터)

        **워크플로우**:
        1. 사용자 확인
        2. receiverId == userId && status == PENDING 조회
        3. 요청자(requester) 정보 매핑
        4. 목록 반환
      operationId: getIncomingFriendRequests
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          description: 조회할 사용자 ID (본인)
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: 받은 친구 요청 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      - id: 5
                        username: "alice_wonder"
                        nickname: "Alice"
                        profileImageUrl: "https://cdn.shoot.com/profiles/alice.jpg"
                      - id: 7
                        username: "charlie_brown"
                        nickname: "Charlie"
                        profileImageUrl: null
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyList:
                  summary: 받은 요청 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/outgoing:
    get:
      tags:
        - Friend Management
      summary: 보낸 친구 요청 목록
      description: |
        내가 보낸 친구 요청들을 조회합니다 (outgoing requests).

        **비즈니스 규칙**:
        - PENDING 상태의 요청만 조회
        - 본인이 요청자(requester)인 요청만 조회
        - 최신순 정렬 (최근 보낸 요청부터)

        **워크플로우**:
        1. 사용자 확인
        2. requesterId == userId && status == PENDING 조회
        3. 수신자(receiver) 정보 매핑
        4. 목록 반환
      operationId: getOutgoingFriendRequests
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          description: 조회할 사용자 ID (본인)
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: 보낸 친구 요청 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      - id: 8
                        username: "david_lee"
                        nickname: "David"
                        profileImageUrl: "https://cdn.shoot.com/profiles/david.jpg"
                      - id: 9
                        username: "emily_clark"
                        nickname: "Emily"
                        profileImageUrl: null
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyList:
                  summary: 보낸 요청 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/search:
    get:
      tags:
        - Friend Search
      summary: 친구 검색
      description: |
        로그인 사용자의 친구 목록 중 검색어와 일치하는 친구들을 반환합니다.

        **검색 범위**:
        - ACCEPTED 상태의 친구만 검색
        - 본인의 친구 목록에서만 검색

        **검색 대상 필드**:
        - username (사용자 이름)
        - nickname (닉네임)
        - userCode (사용자 코드)

        **검색 방식**:
        - 부분 일치 검색 (LIKE %query%)
        - 대소문자 구분 없음 (case-insensitive)
        - 최소 검색어 길이: 1자

        **워크플로우**:
        1. 사용자 확인
        2. 친구 목록 조회
        3. 검색어로 필터링 (username, nickname, userCode)
        4. 매칭된 결과 반환
      operationId: searchFriends
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          description: 검색을 수행할 사용자 ID (본인)
          schema:
            type: integer
            format: int64
          example: 1
        - name: query
          in: query
          required: true
          description: 검색어 (최소 1자)
          schema:
            type: string
            minLength: 1
          example: "john"
      responses:
        '200':
          description: 친구 검색 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendResponse'
              examples:
                success:
                  summary: 검색 결과 있음
                  value:
                    success: true
                    data:
                      - id: 2
                        username: "john_doe"
                        nickname: "John"
                        profileImageUrl: "https://cdn.shoot.com/profiles/john.jpg"
                      - id: 5
                        username: "johnny_cash"
                        nickname: "Johnny"
                        profileImageUrl: null
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyResult:
                  summary: 검색 결과 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                emptyQuery:
                  summary: 빈 검색어
                  value:
                    success: false
                    data: null
                    message: "검색어는 최소 1자 이상이어야 합니다."
                    errorCode: "INVALID_QUERY"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

  /api/v1/friends/groups:
    post:
      tags:
        - Friend Group
      summary: 그룹 생성
      description: |
        새로운 친구 그룹을 생성합니다.

        **비즈니스 규칙**:
        - 그룹 이름은 필수
        - 설명은 선택사항
        - 생성 시 멤버는 비어있음 (이후 추가)
        - 소유자만 그룹 관리 가능

        **워크플로우**:
        1. 소유자 확인
        2. FriendGroup 엔티티 생성
        3. 생성된 그룹 정보 반환
      operationId: createFriendGroup
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupRequest'
            examples:
              withDescription:
                summary: 설명 포함
                value:
                  ownerId: 1
                  name: "직장 동료"
                  description: "함께 일하는 동료들"
              withoutDescription:
                summary: 설명 없음
                value:
                  ownerId: 1
                  name: "대학 친구"
                  description: null
      responses:
        '200':
          description: 그룹 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "직장 동료"
                      description: "함께 일하는 동료들"
                      memberIds: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'

    get:
      tags:
        - Friend Group
      summary: 내 그룹 목록
      description: |
        로그인 사용자가 소유한 친구 그룹 목록을 조회합니다.

        **워크플로우**:
        1. 소유자 확인
        2. ownerId로 그룹 목록 조회
        3. 그룹 목록 반환 (생성일 최신순)
      operationId: getMyFriendGroups
      security:
        - BearerAuth: []
      parameters:
        - name: ownerId
          in: query
          required: true
          description: 소유자 사용자 ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: 그룹 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      - id: 10
                        ownerId: 1
                        name: "직장 동료"
                        description: "함께 일하는 동료들"
                        memberIds: [2, 3, 5]
                      - id: 11
                        ownerId: 1
                        name: "대학 친구"
                        description: null
                        memberIds: [7, 9]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyList:
                  summary: 그룹 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/friends/groups/{groupId}:
    get:
      tags:
        - Friend Group
      summary: 그룹 단건 조회
      description: |
        특정 그룹의 상세 정보를 조회합니다.

        **워크플로우**:
        1. 그룹 ID로 조회
        2. 그룹 정보 반환 (소유자만 조회 가능)
      operationId: getFriendGroup
      security:
        - BearerAuth: []
      parameters:
        - name: groupId
          in: path
          required: true
          description: 그룹 ID
          schema:
            type: integer
            format: int64
          example: 10
      responses:
        '200':
          description: 그룹 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "직장 동료"
                      description: "함께 일하는 동료들"
                      memberIds: [2, 3, 5]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 그룹을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                groupNotFound:
                  summary: 그룹 없음
                  value:
                    success: false
                    data: null
                    message: "그룹을 찾을 수 없습니다."
                    errorCode: "GROUP_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

    delete:
      tags:
        - Friend Group
      summary: 그룹 삭제
      description: |
        친구 그룹을 삭제합니다.

        **비즈니스 규칙**:
        - 소유자만 삭제 가능
        - 멤버가 있어도 삭제 가능

        **워크플로우**:
        1. 그룹 확인
        2. 소유자 권한 확인
        3. 그룹 삭제
      operationId: deleteFriendGroup
      security:
        - BearerAuth: []
      parameters:
        - name: groupId
          in: path
          required: true
          description: 삭제할 그룹 ID
          schema:
            type: integer
            format: int64
          example: 10
      responses:
        '200':
          description: 그룹 삭제 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: object
                        nullable: true
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data: null
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notOwner:
                  summary: 소유자가 아님
                  value:
                    success: false
                    data: null
                    message: "그룹 소유자만 삭제할 수 있습니다."
                    errorCode: "NOT_GROUP_OWNER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 403
        '404':
          description: 그룹을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/friends/groups/{groupId}/name:
    put:
      tags:
        - Friend Group
      summary: 그룹 이름 변경
      description: |
        그룹 이름을 변경합니다.

        **비즈니스 규칙**:
        - 소유자만 변경 가능
        - 이름은 필수
      operationId: renameFriendGroup
      security:
        - BearerAuth: []
      parameters:
        - name: groupId
          in: path
          required: true
          description: 그룹 ID
          schema:
            type: integer
            format: int64
          example: 10
        - name: name
          in: query
          required: true
          description: 새 그룹 이름
          schema:
            type: string
          example: "회사 동료"
      responses:
        '200':
          description: 이름 변경 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "회사 동료"
                      description: "함께 일하는 동료들"
                      memberIds: [2, 3, 5]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 그룹을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/friends/groups/{groupId}/description:
    put:
      tags:
        - Friend Group
      summary: 그룹 설명 수정
      description: |
        그룹 설명을 수정합니다.

        **비즈니스 규칙**:
        - 소유자만 변경 가능
        - 설명은 null 가능 (삭제)
      operationId: updateFriendGroupDescription
      security:
        - BearerAuth: []
      parameters:
        - name: groupId
          in: path
          required: true
          description: 그룹 ID
          schema:
            type: integer
            format: int64
          example: 10
        - name: description
          in: query
          required: false
          description: 새 설명 (null이면 삭제)
          schema:
            type: string
            nullable: true
          example: "업데이트된 설명"
      responses:
        '200':
          description: 설명 수정 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "회사 동료"
                      description: "업데이트된 설명"
                      memberIds: [2, 3, 5]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 그룹을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/friends/groups/{groupId}/members/{memberId}:
    post:
      tags:
        - Friend Group
      summary: 멤버 추가
      description: |
        그룹에 친구를 멤버로 추가합니다.

        **비즈니스 규칙**:
        - 소유자만 추가 가능
        - 친구 관계여야 추가 가능
        - 이미 멤버인 경우 추가 불가
      operationId: addMemberToFriendGroup
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddMemberInGroupRequest'
            examples:
              normal:
                summary: 멤버 추가
                value:
                  groupId: 10
                  memberId: 7
      responses:
        '200':
          description: 멤버 추가 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "회사 동료"
                      description: "함께 일하는 동료들"
                      memberIds: [2, 3, 5, 7]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                alreadyMember:
                  summary: 이미 멤버임
                  value:
                    success: false
                    data: null
                    message: "이미 그룹 멤버입니다."
                    errorCode: "ALREADY_MEMBER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                notFriends:
                  summary: 친구가 아님
                  value:
                    success: false
                    data: null
                    message: "친구 관계가 아닙니다."
                    errorCode: "NOT_FRIENDS"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 그룹 또는 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Friend Group
      summary: 멤버 제거
      description: |
        그룹에서 멤버를 제거합니다.

        **비즈니스 규칙**:
        - 소유자만 제거 가능
        - 멤버가 아닌 경우 제거 불가
      operationId: removeMemberFromFriendGroup
      security:
        - BearerAuth: []
      parameters:
        - name: groupId
          in: path
          required: true
          description: 그룹 ID
          schema:
            type: integer
            format: int64
          example: 10
        - name: memberId
          in: path
          required: true
          description: 제거할 멤버 ID
          schema:
            type: integer
            format: int64
          example: 7
      responses:
        '200':
          description: 멤버 제거 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/FriendGroupResponse'
              examples:
                success:
                  summary: 성공 응답
                  value:
                    success: true
                    data:
                      id: 10
                      ownerId: 1
                      name: "회사 동료"
                      description: "함께 일하는 동료들"
                      memberIds: [2, 3, 5]
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notMember:
                  summary: 멤버가 아님
                  value:
                    success: false
                    data: null
                    message: "그룹 멤버가 아닙니다."
                    errorCode: "NOT_MEMBER"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 그룹을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/friends/recommend/bfs:
    get:
      tags:
        - Friend Recommendation
      summary: BFS 추천
      description: |
        BFS(Breadth-First Search) 알고리즘을 통해 친구 네트워크를 탐색하여 추천 후보를 반환합니다.

        **추천 알고리즘**:
        - 친구의 친구를 탐색 (2촌, 3촌 등)
        - BFS 알고리즘 사용 (최대 depth: 3)
        - 최대 추천 수: 20명 (DomainConstants)

        **제외 대상**:
        - 자기 자신
        - 이미 친구인 사용자
        - 이미 친구 요청을 보낸/받은 사용자 (PENDING)

        **정렬 기준**:
        - 공통 친구 수가 많은 순
        - 같은 depth 내에서는 거리가 가까운 순

        **워크플로우**:
        1. 사용자 확인
        2. BFS로 친구 네트워크 탐색 (maxDepth까지)
        3. 제외 대상 필터링
        4. 공통 친구 수 계산 및 정렬
        5. limit만큼 반환 (skip 적용 - 페이지네이션)
      operationId: recommendFriendsBFS
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          description: 추천을 받을 사용자 ID
          schema:
            type: integer
            format: int64
          example: 1
        - name: limit
          in: query
          required: false
          description: 추천 결과 개수 (기본값 10)
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 20
          example: 10
        - name: maxDepth
          in: query
          required: false
          description: BFS 최대 탐색 depth (기본값 2, 최대 3)
          schema:
            type: integer
            default: 2
            minimum: 1
            maximum: 3
          example: 2
        - name: skip
          in: query
          required: false
          description: 페이지네이션 오프셋 (기본값 0)
          schema:
            type: integer
            default: 0
            minimum: 0
          example: 0
      responses:
        '200':
          description: 친구 추천 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResponseDto'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendResponse'
              examples:
                success:
                  summary: 추천 결과 있음
                  value:
                    success: true
                    data:
                      - id: 15
                        username: "recommended_user1"
                        nickname: "Recommended User 1"
                        profileImageUrl: "https://cdn.shoot.com/profiles/rec1.jpg"
                      - id: 20
                        username: "recommended_user2"
                        nickname: "Recommended User 2"
                        profileImageUrl: null
                      - id: 25
                        username: "recommended_user3"
                        nickname: "Recommended User 3"
                        profileImageUrl: "https://cdn.shoot.com/profiles/rec3.jpg"
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
                emptyResult:
                  summary: 추천 결과 없음
                  value:
                    success: true
                    data: []
                    message: null
                    errorCode: null
                    timestamp: "2025-01-08T12:00:00"
                    code: 200
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalidLimit:
                  summary: 잘못된 limit 값
                  value:
                    success: false
                    data: null
                    message: "limit은 1에서 20 사이여야 합니다."
                    errorCode: "INVALID_LIMIT"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
                invalidDepth:
                  summary: 잘못된 maxDepth 값
                  value:
                    success: false
                    data: null
                    message: "maxDepth는 1에서 3 사이여야 합니다."
                    errorCode: "INVALID_DEPTH"
                    timestamp: "2025-01-08T12:00:00"
                    code: 400
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 사용자를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                userNotFound:
                  summary: 사용자 없음
                  value:
                    success: false
                    data: null
                    message: "사용자를 찾을 수 없습니다."
                    errorCode: "USER_NOT_FOUND"
                    timestamp: "2025-01-08T12:00:00"
                    code: 404

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT 기반 인증

        **사용 방법**:
        ```
        Authorization: Bearer <access_token>
        ```

        **토큰 획득**:
        - POST /api/v1/auth/login으로 로그인하여 토큰 획득

        **토큰 갱신**:
        - POST /api/v1/auth/refresh-token으로 refresh token을 사용하여 새 access token 획득

  schemas:
    # Common Response Schemas
    ResponseDto:
      type: object
      required:
        - success
        - timestamp
        - code
      properties:
        success:
          type: boolean
          description: 요청 성공 여부
          example: true
        data:
          type: object
          nullable: true
          description: 응답 데이터 (타입은 각 API마다 다름)
        message:
          type: string
          nullable: true
          description: 응답 메시지
          example: "요청이 성공적으로 처리되었습니다."
        errorCode:
          type: string
          nullable: true
          description: 에러 코드 (에러 발생 시에만)
          example: null
        timestamp:
          type: string
          format: date-time
          description: 응답 시각 (ISO 8601)
          example: "2025-01-08T12:00:00"
        code:
          type: integer
          description: HTTP 상태 코드
          example: 200

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/ResponseDto'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            data:
              type: object
              nullable: true
              example: null
            errorCode:
              type: string
              description: 에러 코드
              example: "VALIDATION_ERROR"

    # Friend Request Schemas
    SendFriendRequest:
      type: object
      required:
        - userId
        - targetUserId
      properties:
        userId:
          type: integer
          format: int64
          description: 요청을 보내는 사용자 ID
          example: 1
        targetUserId:
          type: integer
          format: int64
          description: 요청을 받을 대상 사용자 ID
          example: 2

    CancelFriendRequest:
      type: object
      required:
        - userId
        - targetUserId
      properties:
        userId:
          type: integer
          format: int64
          description: 요청을 취소하는 사용자 ID (본인)
          example: 1
        targetUserId:
          type: integer
          format: int64
          description: 요청 대상 사용자 ID
          example: 2

    AcceptFriendRequest:
      type: object
      required:
        - userId
        - requesterId
      properties:
        userId:
          type: integer
          format: int64
          description: 요청을 수락하는 사용자 ID (본인, 수신자)
          example: 2
        requesterId:
          type: integer
          format: int64
          description: 요청을 보낸 사용자 ID
          example: 1

    RejectFriendRequest:
      type: object
      required:
        - userId
        - requesterId
      properties:
        userId:
          type: integer
          format: int64
          description: 요청을 거절하는 사용자 ID (본인, 수신자)
          example: 2
        requesterId:
          type: integer
          format: int64
          description: 요청을 보낸 사용자 ID
          example: 1

    FriendResponse:
      type: object
      description: 친구 또는 친구 요청 정보
      required:
        - id
        - username
        - nickname
      properties:
        id:
          type: integer
          format: int64
          description: 사용자 ID
          example: 2
        username:
          type: string
          description: 사용자 이름
          example: "jane_smith"
        nickname:
          type: string
          description: 닉네임
          example: "Jane"
        profileImageUrl:
          type: string
          format: uri
          nullable: true
          description: 프로필 이미지 URL
          example: "https://cdn.shoot.com/profiles/jane.jpg"

    # Friend Group Schemas
    CreateGroupRequest:
      type: object
      description: 친구 그룹 생성 요청
      required:
        - ownerId
        - name
      properties:
        ownerId:
          type: integer
          format: int64
          description: 그룹 소유자 ID
          example: 1
        name:
          type: string
          description: 그룹 이름
          example: "직장 동료"
        description:
          type: string
          nullable: true
          description: 그룹 설명 (선택사항)
          example: "함께 일하는 동료들"

    AddMemberInGroupRequest:
      type: object
      description: 그룹에 멤버 추가 요청
      required:
        - groupId
        - memberId
      properties:
        groupId:
          type: integer
          format: int64
          description: 그룹 ID
          example: 10
        memberId:
          type: integer
          format: int64
          description: 추가할 멤버 (친구) ID
          example: 7

    FriendGroupResponse:
      type: object
      description: 친구 그룹 정보
      required:
        - id
        - ownerId
        - name
        - memberIds
      properties:
        id:
          type: integer
          format: int64
          description: 그룹 ID
          example: 10
        ownerId:
          type: integer
          format: int64
          description: 그룹 소유자 ID
          example: 1
        name:
          type: string
          description: 그룹 이름
          example: "직장 동료"
        description:
          type: string
          nullable: true
          description: 그룹 설명
          example: "함께 일하는 동료들"
        memberIds:
          type: array
          items:
            type: integer
            format: int64
          description: 그룹 멤버 ID 목록
          example: [2, 3, 5]

    # User Schemas (shared from User Service)
    UserResponse:
      type: object
      description: 사용자 상세 정보
      required:
        - id
        - username
        - nickname
        - status
        - userCode
      properties:
        id:
          type: integer
          format: int64
          description: 사용자 고유 ID
          example: 1
        username:
          type: string
          description: 사용자 이름 (3-20자, 고유)
          minLength: 3
          maxLength: 20
          example: "john_doe"
        nickname:
          type: string
          description: 닉네임 (1-30자)
          minLength: 1
          maxLength: 30
          example: "John"
        email:
          type: string
          format: email
          nullable: true
          description: 이메일 주소
          example: "john@example.com"
        status:
          $ref: '#/components/schemas/UserStatus'
        profileImageUrl:
          type: string
          format: uri
          nullable: true
          description: 프로필 이미지 URL
          example: "https://cdn.shoot.com/profiles/john_doe.jpg"
        backgroundImageUrl:
          type: string
          format: uri
          nullable: true
          description: 배경 이미지 URL
          example: "https://cdn.shoot.com/backgrounds/john_doe.jpg"
        statusMessage:
          type: string
          nullable: true
          description: 상태 메시지
          example: "Hello!"
        userCode:
          type: string
          description: 사용자 코드 (8자리 대문자+숫자, 고유)
          pattern: '^[A-Z0-9]{8}$'
          example: "ABCD1234"

    UserStatus:
      type: string
      description: 사용자 상태
      enum:
        - ACTIVE      # 활성화
        - INACTIVE    # 비활성화
        - SUSPENDED   # 정지됨
        - DELETED     # 삭제됨
      example: "ACTIVE"

  responses:
    Unauthorized:
      description: 인증 실패 - 유효하지 않거나 만료된 토큰
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            invalidToken:
              summary: 유효하지 않은 토큰
              value:
                success: false
                data: null
                message: "유효하지 않은 토큰입니다."
                errorCode: "INVALID_TOKEN"
                timestamp: "2025-01-08T12:00:00"
                code: 401
            expiredToken:
              summary: 만료된 토큰
              value:
                success: false
                data: null
                message: "토큰이 만료되었습니다."
                errorCode: "EXPIRED_TOKEN"
                timestamp: "2025-01-08T12:00:00"
                code: 401
